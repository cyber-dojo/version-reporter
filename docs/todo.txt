
Gitlab Demo

Lead time from commit to aws-prod is going to be ~10min
(or ~7mins if we don't deploy to aws-beta).

If you do each one demo for each of the three test jobs it will take a long time!
You could do all three in one commit
  1) add snyk vulnerability
  2) comment out tests
  3) git push not in pull-request
You could make a pre-recorded video and get JC to cut out the waiting?
These would be great for social media...

TODO: snyk needs authenticated account.
IIRC using Sami's...
Still ok for now

TODO: pull-request-job
Needs working gitlab-token. The one we tried gives 403 Forbidden.
There is no information on the URL being forbidden but we assume
it is from the Kosli CLI.

TODO: approval-job
$ kosli report approval ...
How do I find the --oldest-commit value?

TODO: prod-deployment-job
Needs env-vars for AWS_ACCESS_KEY_ID_PROD and AWS_SECRET_ACCESS_KEY_PROD

TODO: Change environment descriptions.
aws-beta == "The ECS cluster for staging cyber-dojo"
aws-prod == "The ECS cluster for production cyber-dojo"
There seems to be no API to do this.

TODO: Deployment diff not working for version-reporter
Eg https://app.kosli.com/cyber-dojo/environments/aws-beta/snapshots/2121?active_tab=running
The top-most artifact is cyberdojo/version-reporter:f497340
Its git commit URL is https://gitlab.com/cyber-dojo/version-reporter/-/commit/f4973405af09bb3d894f68c10d712321d86155ac
The artifact being replaced is cyberdojo/version-reporter:e78fff8
https://app.kosli.com/cyber-dojo/flows/version-reporter/artifacts/afa3299d047f473d19caf66d7d25b39824a78309e6aa9160ca77845e1d19db96
Its git commit URL is https://gitlab.com/cyber-dojo/version-reporter/-/commit/e78fff829146281b76be1aff841c19e078a96da1
Both these URLs are valid and open ok (if you are a member of the Gitlab cyber-dojo Org)
But in the Kosli UX (from the 1st URL in this TODO)
Click its "Deployment diff" dropdown.
There is no Deployment diff URL

TODO: also send all kosli reports to https://staging.app.kosli.com
At the moment https://staging.app.kosli.com is showing the
cyber-dojo environments as being non-compliant.
This is correct. The version-reporter images are being seen as
no-provenance because there have been no artifact reports to https://staging.app.kosli.com
